	private TreeWalk initializeTreeWalk(Repository repo, String path)
			throws CorruptObjectException {
		TreeWalk tw = new TreeWalk(repo);
		tw.reset();
		int ignoreNth = tw.addTree(new FileTreeIterator(repo));

		TreeFilter pathFilter = PathFilter.create(path);
		TreeFilter ignoreFilter = new NotIgnoredFilter(ignoreNth);
		tw.setFilter(AndTreeFilter.create(pathFilter, ignoreFilter));

		return tw;
	}

