	public void run(IProgressMonitor monitor) throws CoreException {
		monitor.beginTask(NLS.bind(CoreText.BranchOperation_performingBranch,
				refName), 6);
		lookupRefs();
		monitor.worked(1);

		mapObjects();
		monitor.worked(1);

		checkoutTree();
		monitor.worked(1);

		writeIndex();
		monitor.worked(1);

		updateHeadRef();
		monitor.worked(1);

		ProjectUtil.refreshProjects(repository, new SubProgressMonitor(monitor,
				1));
		monitor.worked(1);

		monitor.done();
	}

