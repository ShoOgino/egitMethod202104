	private List<String> getConfiguredRepositories(boolean checkPaths) {
		synchronized (prefs) {
			Set<String> configuredStrings = new HashSet<String>();
			Set<String> resultStrings = new HashSet<String>();

			String dirs = prefs.get(PREFS_DIRECTORIES, ""); //$NON-NLS-1$
			if (dirs != null && dirs.length() > 0) {
				StringTokenizer tok = new StringTokenizer(dirs,
						File.pathSeparator);
				while (tok.hasMoreTokens()) {
					String dirName = tok.nextToken();
					configuredStrings.add(dirName);
					if (checkPaths) {
						File testFile = new File(dirName);
						if (!FileKey.isGitRepository(testFile, FS.DETECTED))
							resultStrings.add(dirName);
					}
					resultStrings.add(dirName);
				}
			}

			if (checkPaths && resultStrings.size() < configuredStrings.size())
				saveDirs(resultStrings);
			List<String> result = new ArrayList<String>();
			result.addAll(resultStrings);
			Collections.sort(result);
			return result;
		}
	}

