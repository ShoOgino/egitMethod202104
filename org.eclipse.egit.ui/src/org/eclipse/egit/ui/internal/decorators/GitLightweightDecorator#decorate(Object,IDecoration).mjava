	/**
	 * This method should only be called by the decorator thread.
	 *
	 * @see org.eclipse.jface.viewers.ILightweightLabelDecorator#decorate(java.lang.Object,
	 *      org.eclipse.jface.viewers.IDecoration)
	 */
	public void decorate(Object element, IDecoration decoration) {
		// Don't decorate if UI plugin is not running
		if (Activator.getDefault() == null)
			return;

		// Don't decorate if the workbench is not running
		if (!PlatformUI.isWorkbenchRunning())
			return;

		final IResource resource = getResource(element);
		if (resource == null)
			decorateResourceMapping(element, decoration);
		else {
			try {
				decorateResource(resource, decoration);
			} catch(CoreException e) {
				handleException(resource, e);
			}
		}
	}

