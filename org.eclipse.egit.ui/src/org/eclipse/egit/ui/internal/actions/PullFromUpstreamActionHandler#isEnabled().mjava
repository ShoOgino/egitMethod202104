	@Override
	public boolean isEnabled() {
		// we don't do the full canMerge check here, but
		// ensure that a branch is checked out
		Repository[] repos = getRepositories();
		for (Repository repo : repos)
			try {
				String fullBranch = repo.getFullBranch();
				if (fullBranch == null
						|| !fullBranch.startsWith(Constants.R_REFS)) {
					return false;
				}
				Ref head = repo.exactRef(Constants.HEAD);
				if (head == null || head.getObjectId() == null) {
					return false;
				}
			} catch (IOException e) {
				Activator.handleError(e.getMessage(), e, false);
				return false;
			}
		return repos.length > 0;
	}

