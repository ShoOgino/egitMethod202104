	@Test
	public void testRenameBranch() throws Exception {
		SWTBotShell dialog = openRenameBranchDialog();

		dialog.bot().tree().getTreeItem(LOCAL_BRANCHES).expand()
				.getNode("stable").select();
		dialog.bot().button(UIText.RenameBranchDialog_RenameButtonLabel)
				.click();
		// rename stable to renamed
		SWTBotShell newNameDialog = bot
				.shell(UIText.RenameBranchDialog_RenameBranchDialogNewNameInputWindowTitle);
		newNameDialog.bot().text().setText("master");
		assertFalse(newNameDialog.bot().button(IDialogConstants.OK_LABEL)
				.isEnabled());

		newNameDialog.bot().text().setText("renamed");
		newNameDialog.bot().button(IDialogConstants.OK_LABEL).click();

		TestUtil.joinJobs(JobFamilies.CHECKOUT);
		dialog = openRenameBranchDialog();
		dialog.bot().tree().getTreeItem(LOCAL_BRANCHES).expand()
				.getNode("renamed");
		dialog.close();

		dialog = openRenameBranchDialog();
		dialog.bot().tree().getTreeItem(LOCAL_BRANCHES).expand()
				.getNode("renamed").select();
		dialog.bot().button(UIText.RenameBranchDialog_RenameButtonLabel)
				.click();
		// rename renamed to stable
		newNameDialog = bot
				.shell(UIText.RenameBranchDialog_RenameBranchDialogNewNameInputWindowTitle);

		newNameDialog.bot().text().setText("stable");
		newNameDialog.bot().button(IDialogConstants.OK_LABEL).click();

		TestUtil.joinJobs(JobFamilies.CHECKOUT);
		dialog = openRenameBranchDialog();
		dialog.bot().tree().getTreeItem(LOCAL_BRANCHES).expand()
				.getNode("stable");
		dialog.close();
	}

