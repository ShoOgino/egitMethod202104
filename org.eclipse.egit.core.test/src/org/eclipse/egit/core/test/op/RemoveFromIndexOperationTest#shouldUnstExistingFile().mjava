	@Test
	public void shouldUnstExistingFile() throws Exception {
		// given
		IFile file1 = createFileInRepo("a.txt");
		List<String> resources = new ArrayList<String>();
		resources.add(getMapping(file1).getRepoRelativePath(file1));
		new AddToIndexOperation(asList(file1)).execute(null);

		testRepo.commit("first commit");

		Thread.sleep(1000);
		file1.setContents(
				new ByteArrayInputStream("other text".getBytes(project.project
						.getDefaultCharset())), 0, null);
		new AddToIndexOperation(asList(file1)).execute(null);

		// when
		new RemoveFromIndexOperation(repo, resources).execute(null);

		// then
		assertTrue(testRepo.removedFromIndex(file1.getLocation().toPortableString()));
	}

