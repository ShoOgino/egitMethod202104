	@Before
	public void setUp() throws Exception {
		super.setUp();

		project.createSourceFolder();
		gitDir = new File(project.getProject().getWorkspace().getRoot()
				.getRawLocation().toFile(), Constants.DOT_GIT);
		thisGit = new FileRepository(gitDir);
		workDir = thisGit.getWorkTree();
		thisGit.create();
		objectWriter = new ObjectWriter(thisGit);

		tree = new Tree(thisGit);
		Tree projectTree = tree.addTree("Project-1");
		File project1_a_txt = createFile("Project-1/A.txt","A.txt - first version\n");
		addFile(projectTree,project1_a_txt);
		projectTree.setId(objectWriter.writeTree(projectTree));
		File project1_b_txt = createFile("Project-1/B.txt","B.txt - first version\n");
		addFile(projectTree,project1_b_txt);
		projectTree.setId(objectWriter.writeTree(projectTree));
		tree.setId(objectWriter.writeTree(tree));
		Commit commit = new Commit();
		commit.setAuthor(new PersonIdent(jauthor, new Date(0L), TimeZone
				.getTimeZone("GMT+1")));
		commit.setCommitter(new PersonIdent(jcommitter, new Date(0L), TimeZone
				.getTimeZone("GMT+1")));
		commit.setMessage("Foo\n\nMessage");
		commit.setTreeId(tree.getTreeId());
		ObjectId commitId = objectWriter.writeCommit(commit);

		tree = new Tree(thisGit);
		projectTree = tree.addTree("Project-1");
		addFile(projectTree,project1_a_txt);

		File project1_b_v2_txt = createFile("Project-1/B.txt","B.txt - second version\n");
		addFile(projectTree,project1_b_v2_txt);
		projectTree.setId(objectWriter.writeTree(projectTree));
		tree.setId(objectWriter.writeTree(tree));
		commit = new Commit();
		commit.setAuthor(new PersonIdent(jauthor, new Date(0L), TimeZone
				.getTimeZone("GMT+1")));
		commit.setCommitter(new PersonIdent(jcommitter, new Date(0L), TimeZone
				.getTimeZone("GMT+1")));
		commit.setMessage("Modified");
		commit.setParentId(commitId);
		commit.setTreeId(tree.getTreeId());
		commitId = objectWriter.writeCommit(commit);

		RefUpdate lck = thisGit.updateRef("refs/heads/master");
		assertNotNull("obtained lock", lck);
		lck.setNewObjectId(commitId);
		assertEquals(RefUpdate.Result.NEW, lck.forceUpdate());

		ConnectProviderOperation operation = new ConnectProviderOperation(
				project.getProject(), gitDir);
		operation.execute(null);
	}

