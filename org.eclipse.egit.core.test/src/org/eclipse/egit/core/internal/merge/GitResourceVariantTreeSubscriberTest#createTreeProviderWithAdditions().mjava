	private GitResourceVariantTreeProvider createTreeProviderWithAdditions()
			throws Exception {
		testRepo.createBranch(MASTER, BASE);
		testRepo.createAndCheckoutBranch(MASTER, BRANCH);
		file2 = testRepo.createFile(iProject, "file2");
		testRepo.appendContentAndCommit(iProject, file2, INITIAL_CONTENT_2,
				"Creation of file2 in branch2.");

		testRepo.checkoutBranch(MASTER);
		file1 = testRepo.createFile(iProject, "file1");
		testRepo.appendContentAndCommit(iProject, file1, INITIAL_CONTENT_1,
				"Creation of file1 in branch1.");

		iProject.refreshLocal(IResource.DEPTH_INFINITE,
				new NullProgressMonitor());

		// as if we tried to merge branch3 into branch2
		try (RevWalk walk = new RevWalk(repo)) {
			RevTree baseTree = walk.parseTree(repo.resolve(BASE));
			RevTree sourceTree = walk.parseTree(repo.resolve(MASTER));
			RevTree remoteTree = walk.parseTree(repo.resolve(BRANCH));
			TreeWalk treeWalk = new NameConflictTreeWalk(repo);
			treeWalk.addTree(baseTree);
			treeWalk.addTree(sourceTree);
			treeWalk.addTree(remoteTree);
			return new TreeWalkResourceVariantTreeProvider(repo, treeWalk, 0,
					1, 2);
		}
	}

